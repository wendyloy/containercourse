networks:
  # docker network create mynet
  mynet:

volumes:
  # docker volume create data-vol
  data-vol:

services:
  # docker run -d --mount type=volume,src=data-vol,dst=/var/lib/mysql --network=mynet
  mydb:
    image: stackupiss/northwind-db:v1
    volumes:
    - type: volume
      source: data-vol
      target: /var/lib/mysql
    environment: 
    - MYSQL_ROOT_PASSWORD=changeit
    networks:
    - mynet
    # Note: did not write port since we don't want to expose it

  # docker run -d -p 8080:3000 -e ... --network-mynet
  myapp:
    image: stackupiss/northwind-app:v1
    environment:
    - DB_HOST=mydb
    - DB_USER=root
    - DB_PASSOWRD=changeit
    ports:
    - 8080:3000
    networks:
    - mynet
    depends_on:
      mydb:
        condition: service_started